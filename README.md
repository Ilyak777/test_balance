# Таска

необходимо сделать небольшой web server

обязательно: postgres

всякие дополнения вроде кеширования, валидации и прочего - не обязательно, но будет плюсом

endpoint 1:

нужно обратиться к списку предметов skinport (**https://docs.skinport.com/#items**)

и отобразить массив объектов, где помимо прочего должны быть указаны две минимальные цены на предмет (одна цена — tradable, другая — нет)

параметры app_id и currency - default, базу здесь использовать не нужно, все в памяти, но с кэшированием

endpoint 2:

есть табличка users с полями id и balance, там есть один юзер с id = 1

вторая табличка с историей изменения платежа (user_id, action, amount, ts)

нужно реализовать списание баланса пользователя

пример: юзер покупает предмет на сайте за $100\*\* \*\*

пересчет баланса по истории после каждой операции в поле balance

базу можно не поднимать, просто показать код как это может работать

# Запуск

Для теста обоих сервисов надо поднять docker-compose(внутри reddis+ postgre)

```
docker-compose up --build
```

Если придется перезапускать бд или кеш, дропать надо с удалением volumes(иначе ругается на postgre, что бд уже там есть)

```
docker-compose down --volumes
```

После запуска можно запускать сам сервак

```
npm run dev
```

Теперь у нас на адресе http://localhost:3000/skins эндпоинт для получения массива скинов с добавлением non_tradable_min_price и с использованием кеширования

А на http://localhost:3000/purchase обработка платежа для одного юзера с использованием транзакции и поверхностной обработкой ошибок, body к запросу выглядит следующим образом

```
{
    "amount": 100
}
```

Для удаления кеша всех айтемов нужно отправить get на
http://localhost:3000/cache/del
